---
import { projects } from "../data/projects";

interface Props {
  currentSlug: string;
}

const { currentSlug } = Astro.props;
const currentIndex = projects.findIndex((p) => p.slug === currentSlug);
const total = projects.length;
const prev = currentIndex > 0 ? projects[currentIndex - 1] : null;
const next = currentIndex < total - 1 ? projects[currentIndex + 1] : null;
---
<nav class="project-nav" aria-label="Project navigation">
  {prev ? (
    <a href={`${import.meta.env.BASE_URL}work/${prev.slug}`} class="project-nav__link project-nav__link--prev" aria-label={`Projecte anterior: ${prev.title}`}>
      <span class="project-nav__arrow" aria-hidden="true">&larr;</span>
      <span class="project-nav__meta">
        <span class="project-nav__label">{String(currentIndex).padStart(2, "0")}/{String(total).padStart(2, "0")}</span>
        <span class="project-nav__title">{prev.title}</span>
      </span>
    </a>
  ) : <span />}
  {next ? (
    <a href={`${import.meta.env.BASE_URL}work/${next.slug}`} class="project-nav__link project-nav__link--next" aria-label={`Projecte segÃ¼ent: ${next.title}`}>
      <span class="project-nav__meta">
        <span class="project-nav__label">{String(currentIndex + 2).padStart(2, "0")}/{String(total).padStart(2, "0")}</span>
        <span class="project-nav__title">{next.title}</span>
      </span>
      <span class="project-nav__arrow" aria-hidden="true">&rarr;</span>
    </a>
  ) : <span />}
</nav>

<style>
  .project-nav {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    padding: 4rem 0;
    border-top: 1px solid rgba(255, 255, 255, 0.08);
    margin-top: 5rem;
    gap: 2rem;
  }

  .project-nav__link {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    text-decoration: none;
    color: var(--color-text-muted, #999);
    max-width: 50%;
  }

  @media (prefers-reduced-motion: no-preference) {
    .project-nav__link {
      transition: color var(--motion-duration) var(--motion-ease);
    }
  }

  .project-nav__link:hover {
    color: #fff;
    text-decoration: none;
  }

  .project-nav__link--next {
    text-align: right;
    margin-left: auto;
  }

  .project-nav__arrow {
    font-family: "JetBrains Mono", monospace;
    font-size: 1.25rem;
    line-height: 1;
    flex-shrink: 0;
    margin-top: 0.15em;
    display: inline-block;
    transition: transform var(--motion-duration) var(--motion-ease);
  }

  @media (prefers-reduced-motion: no-preference) {
    .project-nav__link--prev:hover .project-nav__arrow {
      transform: translateX(-0.15em);
    }
    .project-nav__link--next:hover .project-nav__arrow {
      transform: translateX(0.15em);
    }
  }

  .project-nav__meta {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .project-nav__label {
    font-family: "JetBrains Mono", monospace;
    font-size: 0.75rem;
    font-weight: 600;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    opacity: 0.5;
  }

  .project-nav__title {
    font-family: "JetBrains Mono", monospace;
    font-size: 0.9375rem;
    font-weight: 400;
    line-height: 1.3;
  }
</style>
